<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo de Produtos Polo Norte</title>
    <style>
        /* CSS Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2a5d84;
            --secondary-color: #1e3a5f;
            --text-dark: #2c3e50;
            --text-light: #666;
            --accent-green: #27ae60;
            --accent-red: #e74c3c;
            --bg-light: #f8f9fa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Mobile First Styles */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        .header p {
            font-size: 1em;
            margin-bottom: 15px;
        }
        
        .fullscreen-button {
            display: inline-block; 
            padding: 8px 15px;
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            background: transparent;
            color: var(--primary-color);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            margin-top: 10px;
        }

        .search-filter {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: stretch;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 16px;
        }
        
        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-filter {
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            background: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            flex-grow: 1;
        }

        .category-filter:hover,
        .category-filter.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }
        
        .product-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        .product-category {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 6px 14px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 15px;
            display: inline-block;
        }

        .product-name { font-size: 18px; font-weight: 600; margin-bottom: 10px; color: var(--text-dark); }
        .product-volume { color: var(--text-light); font-size: 14px; margin-bottom: 15px; }
        .product-price { font-size: 24px; font-weight: bold; color: var(--accent-green); margin-bottom: 15px; }
        .quantity-controls { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; justify-content: center; }
        .quantity-btn { width: 40px; height: 40px; border: 2px solid var(--primary-color); background: white; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: bold; color: var(--primary-color); transition: all 0.3s ease; font-size: 18px; }
        .quantity-btn:hover { background: var(--primary-color); color: white; transform: scale(1.1); }
        .quantity-display { font-weight: bold; font-size: 18px; min-width: 40px; text-align: center; background: var(--bg-light); padding: 8px 12px; border-radius: 10px; }
        .add-to-cart { width: 100%; padding: 15px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; border: none; border-radius: 25px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        
        .cart-sidebar {
            position: fixed;
            right: -100%; top: 0; width: 100%; height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.2);
            transition: right 0.3s ease-in-out;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.open { right: 0; }
        .cart-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; }
        .cart-header h2 { font-size: 20px; }
        .close-cart { background: none; border: none; color: white; font-size: 28px; cursor: pointer; }
        
        .cart-step { display: flex; flex-direction: column; height: 100%; }
        .cart-items { flex: 1; overflow-y: auto; padding: 20px; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; }
        .cart-item-name { font-weight: bold; font-size: 16px; }
        .cart-item-details { color: var(--text-light); font-size: 14px; }
        .cart-item-price { color: var(--accent-green); font-weight: bold; font-size: 16px; }
        .remove-item { background: var(--accent-red); color: white; border: none; border-radius: 15px; padding: 8px 12px; cursor: pointer; font-size: 12px; }
        
        .cart-footer { padding: 20px; background: var(--bg-light); border-top: 3px solid var(--primary-color); }
        
        #delivery-details { padding: 20px; flex: 1; overflow-y: auto; }
        #delivery-details h3 { text-align: center; color: var(--text-dark); margin-bottom: 15px; }
        .address-form-group { margin-bottom: 10px; }
        .address-form-group label { display: block; margin-bottom: 5px; font-weight: 500; color: var(--text-light); }
        .address-form-group input, .address-form-group select { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-size: 1em; }
        .cep-num-group { display: flex; gap: 10px; }
        .cep-num-group .num-field { flex: 0 0 80px; }
        
        .totals-summary { font-size: 1.1em; }
        .totals-summary div { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .totals-summary .final-total { font-size: 1.5em; font-weight: bold; color: var(--primary-color); margin-top: 15px; border-top: 2px solid #ddd; padding-top: 15px; }
        #delivery-fee-message { font-size: 0.9em; text-align: center; color: var(--text-light); margin-top: 5px; }
        
        .cart-footer .btn { width: 100%; padding: 18px; color: white; border: none; border-radius: 25px; font-size: 18px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-primary { background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); }
        .btn-secondary { background: var(--text-light); }
        .btn-checkout { background: linear-gradient(135deg, #25d366, #20b358); }
        .btn:disabled { background: #999; cursor: not-allowed; }
        .cart-nav-buttons { display: flex; gap: 10px; margin-top: 10px; }

        .cart-toggle { position: fixed; bottom: 20px; right: 20px; width: 70px; height: 70px; background: linear-gradient(135deg, var(--accent-red), #c0392b); color: white; border: none; border-radius: 50%; font-size: 24px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4); }
        .cart-count { position: absolute; top: -5px; right: -5px; background: #f39c12; color: white; border-radius: 50%; width: 28px; height: 28px; font-size: 14px; font-weight: bold; display: flex; align-items: center; justify-content: center; }
        .empty-cart { text-align: center; padding: 80px 20px; color: var(--text-light); }
        
        /* Desktop Styles */
        @media (min-width: 769px) {
            .header h1 { font-size: 2.8em; }
            .header p { font-size: 1.1em; }
            .fullscreen-button { display: none; }
            .search-filter { flex-direction: row; }
            .search-input { min-width: 250px; }
            .category-buttons { flex-wrap: nowrap; }
            .products-grid { grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
            .cart-sidebar { width: 450px; right: -450px; }
            .cart-toggle { width: 80px; height: 80px; font-size: 28px; bottom: 30px; right: 30px; }
            .cart-count { width: 30px; height: 30px; top: -8px; right: -8px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè™ Cat√°logo Polo Norte</h1>
            <p>Seus produtos favoritos com entrega r√°pida!</p>
            <p>Escolha, adicione ao carrinho e finalize pelo WhatsApp</p>
            <button id="fullscreenBtn" class="fullscreen-button">üì≤ Tela Cheia</button>
        </div>

        <div class="search-filter">
            <input type="text" id="searchInput" class="search-input" placeholder="üîç Pesquisar produtos...">
            <div class="category-buttons">
                <button class="category-filter active" data-category="all">Todos</button>
                <button class="category-filter" data-category="Cerveja">Cervejas</button>
                <button class="category-filter" data-category="Whisky">Whiskys</button>
                <button class="category-filter" data-category="Vodka">Vodkas</button>
                <button class="category-filter" data-category="Gin">Gins</button>
                <button class="category-filter" data-category="Cacha√ßa">Cacha√ßas</button>
            </div>
        </div>

        <div id="productsGrid" class="products-grid"></div>
    </div>

    <button class="cart-toggle" onclick="toggleCart()">
        üõí
        <span id="cartCount" class="cart-count" style="display: none;">0</span>
    </button>

    <div id="cartSidebar" class="cart-sidebar">
        <div class="cart-header">
            <h2 id="cart-title">üõí Meu Carrinho</h2>
            <button class="close-cart" onclick="toggleCart()">‚úï</button>
        </div>

        <div id="cart-step-1" class="cart-step">
            <div id="cartItems" class="cart-items"></div>
            <div class="cart-footer">
                <div class="totals-summary">
                    <div id="subtotal-line">
                        <span>Subtotal</span>
                        <span id="subtotalAmountStep1">R$ 0,00</span>
                    </div>
                </div>
                <button class="btn btn-primary" id="goToDeliveryBtn" onclick="navigateToCartStep(2)">Continuar para Entrega</button>
            </div>
        </div>
        
        <div id="cart-step-2" class="cart-step" style="display: none;">
            <div id="delivery-details">
                <h3>üìç Endere√ßo de Entrega</h3>
                <div class="address-form-group">
                    <label for="bairro">Bairro</label>
                    <select id="bairro" onchange="calculateDelivery()">
                        <option value="">Selecione o bairro...</option>
                        <option value="sambaqui">Sambaqui</option>
                        <option value="barra-do-sambaqui">Barra do Sambaqui</option>
                        <option value="santo-antonio">Santo Ant√¥nio de Lisboa</option>
                        <option value="outro">Outro Bairro</option>
                    </select>
                </div>
                <div class="address-form-group">
                    <label for="rua">Rua</label>
                    <input type="text" id="rua" placeholder="Nome da sua rua">
                </div>
                <div class="address-form-group cep-num-group">
                    <input type="text" id="cep" class="cep-field" placeholder="CEP">
                    <input type="text" id="numero" class="num-field" placeholder="N¬∫">
                </div>
            </div>
            <div class="cart-footer">
                <div class="totals-summary">
                    <div>
                        <span>Subtotal</span>
                        <span id="subtotalAmountStep2">R$ 0,00</span>
                    </div>
                    <div>
                        <span>Taxa de Entrega</span>
                        <span id="deliveryFeeAmount">R$ 0,00</span>
                    </div>
                    <div class="final-total">
                        <span>Total</span>
                        <span id="totalAmount">R$ 0,00</span>
                    </div>
                    <div id="delivery-fee-message"></div>
                </div>
                <div class="cart-nav-buttons">
                    <button class="btn btn-secondary" onclick="navigateToCartStep(1)">Voltar</button>
                    <button class="btn btn-checkout" id="checkoutBtn" onclick="checkout()">Finalizar Pedido</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const products = [
             {"tipo": "Cacha√ßa", "produto": "51 Sele√ß√£o", "volume": "1L", "preco": "35,99"},
            {"tipo": "Vodka", "produto": "Absolut", "volume": "750ml", "preco": "104,99"},
            {"tipo": "Bebida", "produto": "Agua C/Gas", "volume": "500ml", "preco": "2,49"},
            {"tipo": "Bebida", "produto": "Agua De Coco Campo Largo", "volume": "1lt", "preco": "16,99"},
            {"tipo": "Bebida", "produto": "Agua Mineral", "volume": "500ml", "preco": "2,50"},
            {"tipo": "Acess√≥rio", "produto": "Concha + Tesoura", "volume": "un.", "preco": "30,00"},
            {"tipo": "Acess√≥rio", "produto": "Aluminio avulso", "volume": "un.", "preco": "0,60"},
            {"tipo": "Acess√≥rio", "produto": "Aluminio Predator", "volume": "un.", "preco": "0,60"},
            {"tipo": "Acess√≥rio", "produto": "Aluminio Predator pacote", "volume": "50un", "preco": "20,00"},
            {"tipo": "Snack", "produto": "Amendoin", "volume": "un.", "preco": "4,99"},
            {"tipo": "Snack", "produto": "Amendoin torrado", "volume": "400g", "preco": "9,90"},
            {"tipo": "Rum", "produto": "Bacardi Big Apple", "volume": "750ml", "preco": "62,99"},
            {"tipo": "Doce", "produto": "Bala Halls", "volume": "un.", "preco": "1,99"},
            {"tipo": "Licor", "produto": "Balena Creme de Tequila", "volume": "750ml", "preco": "209,99"},
            {"tipo": "Whisky", "produto": "Ballantine's", "volume": "1 litro", "preco": "129,99"},
            {"tipo": "Energ√©tico", "produto": "Baly", "volume": "2lt", "preco": "14,50"},
            {"tipo": "Energ√©tico", "produto": "Baly Sabores", "volume": "473ml", "preco": "7,99"},
            {"tipo": "Energ√©tico", "produto": "Baly Tropical", "volume": "2lt", "preco": "14,50"},
            {"tipo": "Salgadinho", "produto": "Batata Slice 90g", "volume": "un.", "preco": "9,50"},
            {"tipo": "Gin", "produto": "Beefeater", "volume": "750ml", "preco": "169,99"},
            {"tipo": "Acess√≥rio", "produto": "Bic Acendedor", "volume": "un.", "preco": "13,99"},
            {"tipo": "Bebida", "produto": "Agua Mineral", "volume": "1,5lt", "preco": "4,50"},
            {"tipo": "Acess√≥rio", "produto": "Bic Grande", "volume": "un.", "preco": "7,99"},
            {"tipo": "Acess√≥rio", "produto": "Bic Pequeno", "volume": "un.", "preco": "5,99"},
            {"tipo": "Gin", "produto": "Bombay Sapphire", "volume": "750ml", "preco": "175,99"},
            {"tipo": "Doce", "produto": "Bombom Ouro Branco", "volume": "un.", "preco": "1,99"},
            {"tipo": "Doce", "produto": "Bubalo Sortidos", "volume": "un.", "preco": "0,75"},
            {"tipo": "Whisky", "produto": "Buchanan's Deluxe", "volume": "‚Äî", "preco": "279,99"},
            {"tipo": "Gin", "produto": "Bulldog", "volume": "750ml", "preco": "259,99"},
            {"tipo": "Cacha√ßa", "produto": "Cacha√ßa 51", "volume": "1L", "preco": "17,99"},
            {"tipo": "Cacha√ßa", "produto": "Cacha√ßa Popular", "volume": "1L", "preco": "14,99"},
            {"tipo": "Cacha√ßa", "produto": "Camelinho", "volume": "500ml", "preco": "7,20"},
            {"tipo": "Licor", "produto": "Campari", "volume": "1 lt", "preco": "74,99"},
            {"tipo": "Vinho", "produto": "Campo Largo Branco seco", "volume": "750ml", "preco": "21,99"},
            {"tipo": "Carvao", "produto": "Carvao 3kg", "volume": "un.", "preco": "17,00"},
            {"tipo": "Carvao", "produto": "Carvao 5kg", "volume": "un.", "preco": "26,00"},
            {"tipo": "Tabaco", "produto": "Carvao Narguile", "volume": "un.", "preco": "1,50"},
            {"tipo": "Tabaco", "produto": "Carvao narguile avulso", "volume": "un.", "preco": "1,50"},
            {"tipo": "Tabaco", "produto": "Carvao Narguile D¬¥Coco", "volume": "un.", "preco": "1,50"},
            {"tipo": "Tabaco", "produto": "Carvao Narguile D¬¥Coco Caixa", "volume": "1kg", "preco": "48,00"},
            {"tipo": "Combo", "produto": "Cavalinho + Baly 2lts + Gelo 3kg", "volume": "kit", "preco": "115,00"},
            {"tipo": "Cerveja", "produto": "Cerveja Amstel", "volume": "350ml", "preco": "4,69"},
            {"tipo": "Cerveja", "produto": "Cerveja Amstel Long", "volume": "355ml", "preco": "5,59"},
            {"tipo": "Cerveja", "produto": "Cerveja Baden Baden", "volume": "350ml", "preco": "7,69"},
            {"tipo": "Cerveja", "produto": "Cerveja Baden Baden Ipa", "volume": "350ml", "preco": "7,69"},
            {"tipo": "Cerveja", "produto": "Cerveja Brama", "volume": "350ml", "preco": "4,49"},
            {"tipo": "Cerveja", "produto": "Cerveja Brama Z", "volume": "350ml", "preco": "4,49"},
            {"tipo": "Cerveja", "produto": "Cerveja Bud Long", "volume": "330ml", "preco": "6,79"},
            {"tipo": "Cerveja", "produto": "Cerveja Corona Long", "volume": "330ml", "preco": "8,99"},
            {"tipo": "Cerveja", "produto": "Cerveja Duplo Malte", "volume": "350ml", "preco": "5,29"},
            {"tipo": "Cerveja", "produto": "Cerveja Eisenbah", "volume": "350ml", "preco": "4,89"},
            {"tipo": "Cerveja", "produto": "Cerveja Eisenbah Long", "volume": "355ml", "preco": "7,39"},
            {"tipo": "Cerveja", "produto": "Cerveja Heineken Long", "volume": "330ml", "preco": "8,29"},
            {"tipo": "Cerveja", "produto": "Cerveja Heineken Z.", "volume": "350ml", "preco": "6,49"},
            {"tipo": "Cerveja", "produto": "Cerveja Ipa Lohn", "volume": "600ml", "preco": "13,99"},
            {"tipo": "Cerveja", "produto": "Cerveja Itaipava", "volume": "350ml", "preco": "3,49"},
            {"tipo": "Cerveja", "produto": "Cerveja Itaipava Preta", "volume": "350ml", "preco": "6,19"},
            {"tipo": "Cerveja", "produto": "Cerveja Original", "volume": "350ml", "preco": "5,99"},
            {"tipo": "Cerveja", "produto": "Cerveja Patagonia Ipa", "volume": "473ml", "preco": "8,99"},
            {"tipo": "Cerveja", "produto": "Cerveja Petra", "volume": "350ml", "preco": "3,79"},
            {"tipo": "Cerveja", "produto": "Cerveja Schin", "volume": "350ml", "preco": "3,59"},
            {"tipo": "Cerveja", "produto": "Cerveja Skol", "volume": "350ml", "preco": "4,49"},
            {"tipo": "Cerveja", "produto": "Cerveja Spaten", "volume": "350ml", "preco": "5,99"},
            {"tipo": "Cerveja", "produto": "Cerveja Spaten Long", "volume": "330ml", "preco": "7,39"},
            {"tipo": "Cerveja", "produto": "Cerveja Patagonia", "volume": "473ml", "preco": "9,79"},
            {"tipo": "Cerveja", "produto": "Cerveja Stela Long", "volume": "330ml", "preco": "7,49"},
            {"tipo": "Cerveja", "produto": "Cervja Heineken L.", "volume": "350ml", "preco": "6,49"},
            {"tipo": "Tabaco", "produto": "Charuto talvis", "volume": "un.", "preco": "10,00"},
            {"tipo": "Tabaco", "produto": "Charuto titan", "volume": "un.", "preco": "22,99"},
            {"tipo": "Snack", "produto": "Chips aipim", "volume": "90g", "preco": "5,99"},
            {"tipo": "Whisky", "produto": "Chivas", "volume": "un.", "preco": "189,99"},
            {"tipo": "Doce", "produto": "Chocolate Biss Pacote", "volume": "un.", "preco": "7,19"},
            {"tipo": "Doce", "produto": "Chocolate Biss Xtra", "volume": "un.", "preco": "4,69"},
            {"tipo": "Doce", "produto": "Chocolate Lacta Barra", "volume": "un.", "preco": "7,99"},
            {"tipo": "Cigarro", "produto": "Cigarro Dunhill Azul", "volume": "un.", "preco": "14,25"},
            {"tipo": "Cigarro", "produto": "Cigarro Dunhill Evoque", "volume": "un.", "preco": "15,25"},
            {"tipo": "Cigarro", "produto": "Cigarro Dunhill Ice Boost", "volume": "un.", "preco": "12,00"},
            {"tipo": "Cigarro", "produto": "Cigarro Dunhill Vermelho", "volume": "un.", "preco": "14,25"},
            {"tipo": "Cigarro", "produto": "Cigarro Kent Azul", "volume": "un.", "preco": "7,50"},
            {"tipo": "Cigarro", "produto": "Cigarro Kent Prata", "volume": "un.", "preco": "7,50"},
            {"tipo": "Cigarro", "produto": "Cigarro Kent Vermelho", "volume": "un.", "preco": "7,50"},
            {"tipo": "Cigarro", "produto": "Cigarro Lucky Strike Azul", "volume": "un.", "preco": "12,25"},
            {"tipo": "Cigarro", "produto": "Cigarro Lucky Strike Fresh Mint", "volume": "un.", "preco": "12,50"},
            {"tipo": "Cigarro", "produto": "Cigarro Rothmans Azul", "volume": "un.", "preco": "7,50"},
            {"tipo": "Cigarro", "produto": "Cigarro Rothmans Prata", "volume": "un.", "preco": "10,25"},
            {"tipo": "Cigarro", "produto": "Cigarro Rothmans Vermelho", "volume": "un.", "preco": "7,50"},
            {"tipo": "Refrigerante", "produto": "Coca-Cola 2l", "volume": "2lt", "preco": "14,00"},
            {"tipo": "Refrigerante", "produto": "Coca-Cola 600ml", "volume": "600ml", "preco": "6,59"},
            {"tipo": "Refrigerante", "produto": "Coca-Cola KS", "volume": "200ml", "preco": "2,49"},
            {"tipo": "Refrigerante", "produto": "Coca-Cola Lata", "volume": "350ml", "preco": "4,99"},
            {"tipo": "Refrigerante", "produto": "Coca-Cola Z 2l", "volume": "2lt", "preco": "14,00"},
            {"tipo": "Refrigerante", "produto": "Coca-Zero 600ml", "volume": "600ml", "preco": "6,59"},
            {"tipo": "Refrigerante", "produto": "Coca-Zero KS", "volume": "200ml", "preco": "2,49"},
            {"tipo": "Refrigerante", "produto": "Coca-Zero Lata", "volume": "350ml", "preco": "4,99"},
            {"tipo": "Cacha√ßa", "produto": "Corote", "volume": "500ml", "preco": "7,19"},
            {"tipo": "Acess√≥rio", "produto": "Cuia silicone", "volume": "un.", "preco": "15,00"},
            {"tipo": "Cacha√ßa", "produto": "Cunhaque Conquistador", "volume": "un.", "preco": "17,90"},
            {"tipo": "Acess√≥rio", "produto": "Dichavador", "volume": "un.", "preco": "20,00"},
            {"tipo": "Vodka", "produto": "Doca Vodka", "volume": "750 ml", "preco": "75,99"},
            {"tipo": "Cacha√ßa", "produto": "Dreyer", "volume": "1 litro", "preco": "33,99"},
            {"tipo": "Cacha√ßa", "produto": "Drurys", "volume": "1 litro", "preco": "59,99"},
            {"tipo": "Cigarro", "produto": "Dunhil Avulso", "volume": "un.", "preco": "1,25"},
            {"tipo": "Espumante", "produto": "Espumante Aurora Demi-Sec", "volume": "750 ml", "preco": "47,99"},
            {"tipo": "Espumante", "produto": "Espumante Aurora Prosecco", "volume": "750 ml", "preco": "47,99"},
            {"tipo": "Espumante", "produto": "Espumante Campolargo Moscatel", "volume": "750 ml", "preco": "33,49"},
            {"tipo": "Espumante", "produto": "Espumante Chandon Passion", "volume": "750 ml", "preco": "149,99"},
            {"tipo": "Espumante", "produto": "Espumante Chandon R√©serve Brut", "volume": "750 ml", "preco": "149,99"},
            {"tipo": "Espumante", "produto": "Espumante Freixenet Italian Ros√©", "volume": "750 ml", "preco": "169,99"},
            {"tipo": "Espumante", "produto": "Espumante Freixenet Prosecco DOC", "volume": "750 ml", "preco": "169,99"},
            {"tipo": "Espumante", "produto": "Espumante Saint Germain Moscatel", "volume": "750 ml", "preco": "27,99"},
            {"tipo": "Tabaco", "produto": "Essencia Narguile Zgy", "volume": "un.", "preco": "12,50"},
            {"tipo": "Refrigerante", "produto": "Fanta Lata", "volume": "350ml", "preco": "4,59"},
            {"tipo": "Acess√≥rio", "produto": "Filtro papelito", "volume": "un.", "preco": "12,00"},
            {"tipo": "Bebida", "produto": "Gatorade", "volume": "500ml", "preco": "6,29"},
            {"tipo": "Gelo", "produto": "Gelo", "volume": "3kg", "preco": "10,00"},
            {"tipo": "Gelo", "produto": "Gelo De Sabor", "volume": "un.", "preco": "5,00"},
            {"tipo": "Cigarro", "produto": "Gift", "volume": "un.", "preco": "5,50"},
            {"tipo": "Gin", "produto": "Gin Doca Glow da Sereia", "volume": "750ml", "preco": "75,99"},
            {"tipo": "Gin", "produto": "Gin Rocks Dry", "volume": "1L", "preco": "45,99"},
            {"tipo": "Gin", "produto": "Gin Rocks Strawberry", "volume": "1L", "preco": "45,99"},
            {"tipo": "Gin", "produto": "Gin Rocks Sunset", "volume": "1L", "preco": "45,99"},
            {"tipo": "Gin", "produto": "Gin Rocks Watermelon", "volume": "1L", "preco": "45,99"},
            {"tipo": "Gin", "produto": "Gordon's", "volume": "750ml", "preco": "96,99"},
            {"tipo": "Gin", "produto": "Gordon's Premium Pink", "volume": "750ml", "preco": "96,99"},
            {"tipo": "Vodka", "produto": "Grey Goose", "volume": "750ml", "preco": "264,99"},
            {"tipo": "Refrigerante", "produto": "Guarana", "volume": "1,5lt", "preco": "8,99"},
            {"tipo": "Refrigerante", "produto": "Guaran√° Lata", "volume": "350ml", "preco": "4,59"},
            {"tipo": "Tabaco", "produto": "Gudang", "volume": "carteira", "preco": "40,00"},
            {"tipo": "Cigarro", "produto": "Gudang Avulso", "volume": "un.", "preco": "2,00"},
            {"tipo": "Cacha√ßa", "produto": "Ice 51", "volume": "275ml", "preco": "8,99"},
            {"tipo": "Cacha√ßa", "produto": "Ice Cabare", "volume": "275ml", "preco": "9,09"},
            {"tipo": "Cacha√ßa", "produto": "Ipioca Carvalho", "volume": "1L", "preco": "62,99"},
            {"tipo": "Cacha√ßa", "produto": "Ipioca Mestre", "volume": "1L", "preco": "33,99"},
            {"tipo": "Cacha√ßa", "produto": "Ipioca Ouro", "volume": "1L", "preco": "44,99"},
            {"tipo": "Acess√≥rio", "produto": "Isqueiro Transparente", "volume": "un.", "preco": "2,99"},
            {"tipo": "Combo", "produto": "Itencion + Baly 2lts + Gelo 3kg", "volume": "kit", "preco": "42,00"},
            {"tipo": "Whisky", "produto": "Jack Daniel's Apple", "volume": "1 litro", "preco": "219,00"},
            {"tipo": "Whisky", "produto": "Jack Daniel's N¬∫ 7", "volume": "1 litro", "preco": "199,99"},
            {"tipo": "Whisky", "produto": "Jack de mel", "volume": "un.", "preco": "199,99"},
            {"tipo": "Cacha√ßa", "produto": "Jamel", "volume": "1L", "preco": "15,99"},
            {"tipo": "Whisky", "produto": "Jameson", "volume": "un.", "preco": "115,99"},
            {"tipo": "Whisky", "produto": "Johnnie Walker Double Black", "volume": "‚Äî", "preco": "339,99"},
            {"tipo": "Whisky", "produto": "Johnnie Walker Red Label", "volume": "1 litro", "preco": "119,99"},
            {"tipo": "Whisky", "produto": "Johnnie Walker Red Label", "volume": "750 ml", "preco": "82,99"},
            {"tipo": "Tequila", "produto": "Jos√© Cuervo", "volume": "750ml", "preco": "209,89"},
            {"tipo": "Acess√≥rio", "produto": "Kit Estojo,Piteiras E Seda", "volume": "un.", "preco": "35,00"},
            {"tipo": "Vinho", "produto": "La Linda Malbec Arg.", "volume": "750ml", "preco": "89,99"},
            {"tipo": "Licor", "produto": "Licor 43 Horchata (Vegano)", "volume": "700ml", "preco": "269,99"},
            {"tipo": "Licor", "produto": "Licor 43 Original", "volume": "750ml", "preco": "279,99"},
            {"tipo": "Acess√≥rio", "produto": "Macarico Moon", "volume": "un.", "preco": "20,00"},
            {"tipo": "Licor", "produto": "Marula", "volume": "1L", "preco": "23,99"},
            {"tipo": "Whisky", "produto": "Master Gold", "volume": "un.", "preco": "23,99"},
            {"tipo": "Combo", "produto": "Master Gold + Baly 2lts + Gelo 3Kg", "volume": "kit", "preco": "45,00"},
            {"tipo": "Snack", "produto": "Milho salgado", "volume": "100g", "preco": "8,99"},
            {"tipo": "Snack", "produto": "Miojo Cup Noodles", "volume": "un.", "preco": "6,29"},
            {"tipo": "Cacha√ßa", "produto": "Nato Nobles", "volume": "1 litro", "preco": "73,99"},
            {"tipo": "Tabaco", "produto": "P.Papelito Large", "volume": "un.", "preco": "5,00"},
            {"tipo": "Doce", "produto": "Pacoca", "volume": "un.", "preco": "1,25"},
            {"tipo": "Combo", "produto": "Passport + Baly 2lts + Gelo 3kg", "volume": "kit", "preco": "93,00"},
            {"tipo": "Whisky", "produto": "Passport Selection", "volume": "1 litro", "preco": "73,99"},
            {"tipo": "Cerveja", "produto": "Patagonia 740ml", "volume": "un.", "preco": "18,99"},
            {"tipo": "Acess√≥rio", "produto": "Pegador de carvao", "volume": "un.", "preco": "15,00"},
            {"tipo": "Cacha√ßa", "produto": "Pingo D'Ouro Coco", "volume": "1L", "preco": "15,99"},
            {"tipo": "Snack", "produto": "Pipoca Yoki", "volume": "un.", "preco": "5,29"},
            {"tipo": "Doce", "produto": "Pirulito", "volume": "un.", "preco": "1,00"},
            {"tipo": "Acess√≥rio", "produto": "Piteira Large", "volume": "un.", "preco": "4,99"},
            {"tipo": "Tabaco", "produto": "Piteira Papelito Tradicional", "volume": "un.", "preco": "4,50"},
            {"tipo": "Acess√≥rio", "produto": "Porta cigarro", "volume": "un.", "preco": "16,00"},
            {"tipo": "Refrigerante", "produto": "Pureza", "volume": "1,5lt", "preco": "6,99"},
            {"tipo": "Snack", "produto": "Queijo nacho", "volume": "100g", "preco": "5,99"},
            {"tipo": "Combo", "produto": "Red + Baly 2lts + Gelo 3kg", "volume": "kit", "preco": "135,00"},
            {"tipo": "Energ√©tico", "produto": "Red Bull 350ml", "volume": "350ml", "preco": "16,59"},
            {"tipo": "Energ√©tico", "produto": "Red Bull 473ml", "volume": "473ml", "preco": "19,99"},
            {"tipo": "Energ√©tico", "produto": "Red Bull Sabores", "volume": "250ml", "preco": "11,99"},
            {"tipo": "Acess√≥rio", "produto": "Red Cup", "volume": "un.", "preco": "1,99"},
            {"tipo": "Cigarro", "produto": "Rothmans Box Azul", "volume": "un.", "preco": "10,25"},
            {"tipo": "Rum", "produto": "Rum Bacardi Carta Blanca", "volume": "1L", "preco": "79,99"},
            {"tipo": "Rum", "produto": "Rum Bacardi Carta Ouro", "volume": "1L", "preco": "83,99"},
            {"tipo": "Snack", "produto": "Salgadinho Club Social", "volume": "un.", "preco": "6,29"},
            {"tipo": "Snack", "produto": "Salgadinho Lays", "volume": "un.", "preco": "11,59"},
            {"tipo": "Snack", "produto": "Salgadinho Lays Chese", "volume": "un.", "preco": "12,49"},
            {"tipo": "Snack", "produto": "Salgadinho Mini", "volume": "un.", "preco": "2,99"},
            {"tipo": "Snack", "produto": "Salgadinho Slice", "volume": "un.", "preco": "4,89"},
            {"tipo": "Snack", "produto": "Salgadinho Time", "volume": "un.", "preco": "2,99"},
            {"tipo": "Acess√≥rio", "produto": "Seda OCB", "volume": "un.", "preco": "5,50"},
            {"tipo": "Tabaco", "produto": "Seda Zomo Alfafa", "volume": "un.", "preco": "4,00"},
            {"tipo": "Cerveja", "produto": "Skol Beats L.", "volume": "350ml", "preco": "8,19"},
            {"tipo": "Cerveja", "produto": "Skol Beats Long", "volume": "269ml", "preco": "9,89"},
            {"tipo": "Tabaco", "produto": "Smolking Grande", "volume": "un.", "preco": "7,49"},
            {"tipo": "Tabaco", "produto": "Smolking Pequena", "volume": "un.", "preco": "6,99"},
            {"tipo": "Refrigerante", "produto": "Sprite", "volume": "2lt", "preco": "12,00"},
            {"tipo": "Refrigerante", "produto": "Sprite Lata", "volume": "350ml", "preco": "4,59"},
            {"tipo": "Bebida", "produto": "Suco De Uva Campo Largo", "volume": "1lt", "preco": "18,99"},
            {"tipo": "Tabaco", "produto": "Tabaco Amsterdan", "volume": "un.", "preco": "17,50"},
            {"tipo": "Tabaco", "produto": "Tabaco Chilli", "volume": "un.", "preco": "19,99"},
            {"tipo": "Tabaco", "produto": "Tabaco Captain Black", "volume": "un.", "preco": "27,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Lucky 7", "volume": "un.", "preco": "18,99"},
            {"tipo": "Tabaco", "produto": "Tabaco Red Dog", "volume": "un.", "preco": "21,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Red Man", "volume": "un.", "preco": "22,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Rodeo", "volume": "un.", "preco": "20,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Safari", "volume": "un.", "preco": "22,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Safari Jbl", "volume": "un.", "preco": "25,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Seven Stars", "volume": "un.", "preco": "20,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Shag", "volume": "un.", "preco": "15,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Smokey", "volume": "un.", "preco": "16,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Stoker", "volume": "un.", "preco": "21,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Sting", "volume": "un.", "preco": "23,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Stoker Oi", "volume": "un.", "preco": "20,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Stoker Traditional", "volume": "un.", "preco": "22,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Stoker Vanilla", "volume": "un.", "preco": "23,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Sweet Choice", "volume": "un.", "preco": "24,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Tuckey", "volume": "un.", "preco": "20,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Wolf Pack", "volume": "un.", "preco": "22,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Zomo", "volume": "un.", "preco": "19,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Zomo Alfafa", "volume": "un.", "preco": "22,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Zomo Detox", "volume": "un.", "preco": "25,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Zomo Dry", "volume": "un.", "preco": "24,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Zomo Mojito", "volume": "un.", "preco": "25,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Zomo Super Lemon", "volume": "un.", "preco": "25,00"},
            {"tipo": "Tabaco", "produto": "Tabaco Zomo Vanilla", "volume": "un.", "preco": "23,00"},
            {"tipo": "Acess√≥rio", "produto": "Tesoura", "volume": "un.", "preco": "18,00"},
            {"tipo": "Vinho", "produto": "Toro Arg", "volume": "750ml", "preco": "29,99"},
            {"tipo": "Doce", "produto": "Trento Branco Avela", "volume": "un.", "preco": "4,69"},
            {"tipo": "Doce", "produto": "Trento Preto/branco", "volume": "un.", "preco": "3,69"},
            {"tipo": "Doce", "produto": "Trident", "volume": "un.", "preco": "3,00"},
            {"tipo": "Vinho", "produto": "Vailatti Tinto Suave", "volume": "4 lts", "preco": "57,99"},
            {"tipo": "Cacha√ßa", "produto": "Velho Barreiro", "volume": "1L", "preco": "24,99"},
            {"tipo": "Vinho", "produto": "Vinho Aurora Reserva 2023 Cabernet Sauvignon", "volume": "750ml", "preco": "55,89"},
            {"tipo": "Vinho", "produto": "Vinho Aurora Vareta Asfino 2023 Cabernet Sauvignon", "volume": "750ml", "preco": "45,99"},
            {"tipo": "Vinho", "produto": "Vinho Campo Largo Ros√©", "volume": "750ml", "preco": "19,49"},
            {"tipo": "Vinho", "produto": "Vinho Campo Largo Seco", "volume": "un.", "preco": "21,99"},
            {"tipo": "Vinho", "produto": "Vinho Campo Largo Suave", "volume": "750ml", "preco": "21,99"},
            {"tipo": "Vinho", "produto": "Vinho Girola Bordeaux", "volume": "750ml", "preco": "19,49"},
            {"tipo": "Vinho", "produto": "Vinho Girola Branco Niagara", "volume": "750ml", "preco": "19,99"},
            {"tipo": "Vinho", "produto": "Vinho Girola Ros√©", "volume": "750ml", "preco": "19,99"},
            {"tipo": "Vinho", "produto": "Vinho Montanheiro", "volume": "750ml", "preco": "32,99"},
            {"tipo": "Vinho", "produto": "Vinho Sangue de Boi Suave", "volume": "750ml", "preco": "20,99"},
            {"tipo": "Vinho", "produto": "Vinho Ventos do Sul Suave", "volume": "750ml", "preco": "19,49"},
            {"tipo": "Vodka", "produto": "Vodka Absolut Citron", "volume": "750 ml", "preco": "166,99"},
            {"tipo": "Vodka", "produto": "Vodka Absolut Extrakt", "volume": "750 ml", "preco": "179,99"},
            {"tipo": "Vodka", "produto": "Vodka Absolut Raspberry", "volume": "750 ml", "preco": "166,99"},
            {"tipo": "Vodka", "produto": "Vodka Intension", "volume": "900ml", "preco": "21,99"},
            {"tipo": "Vodka", "produto": "Vodka Natasha", "volume": "900 ml", "preco": "34,99"},
            {"tipo": "Vodka", "produto": "Vodka Orloff", "volume": "1 litro", "preco": "52,99"},
            {"tipo": "Vodka", "produto": "Vodka Sky", "volume": "750 ml", "preco": "46,99"},
            {"tipo": "Vodka", "produto": "Vodka Smirnoff", "volume": "998 ml", "preco": "49,99"},
            {"tipo": "Vodka", "produto": "Vodka Smirnoff", "volume": "600 ml", "preco": "32,99"},
            {"tipo": "Whisky", "produto": "Whiskey Howler Dead Monkey Spirit", "volume": "‚Äî", "preco": "239,99"},
            {"tipo": "Whisky", "produto": "White Horse", "volume": "1 litro", "preco": "95,99"},
            {"tipo": "Tabaco", "produto": "Zoomo Seda", "volume": "un.", "preco": "2,99"},
            {"tipo": "Cigarro", "produto": "Classic", "volume": "un.", "preco": "6,50"}
        ];
        let cart = [];
        let quantities = {};
        let deliveryFee = 0;

        document.addEventListener('DOMContentLoaded', () => {
            products.forEach((product, index) => {
                quantities[index] = 1;
            });

            document.querySelectorAll('.category-filter').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.category-filter').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    const category = this.dataset.category;
                    if (category === 'all') {
                        renderProducts();
                    } else {
                        const filtered = products.filter(product => product.tipo === category);
                        renderProducts(filtered);
                    }
                });
            });
            
            document.getElementById('searchInput').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const filtered = products.filter(product => 
                    product.produto.toLowerCase().includes(searchTerm) ||
                    product.tipo.toLowerCase().includes(searchTerm)
                );
                renderProducts(filtered);
            });
            
            const fullscreenBtn = document.getElementById('fullscreenBtn');
            if(fullscreenBtn) {
                fullscreenBtn.addEventListener('click', () => {
                    if (!document.fullscreenElement) {
                        document.documentElement.requestFullscreen().catch(err => {
                            alert(`N√£o foi poss√≠vel ativar a tela cheia: ${err.message}`);
                        });
                    } else {
                        document.exitFullscreen();
                    }
                });
            }

            renderProducts();
            updateCartUI(); 
        });

        function navigateToCartStep(step) {
            const step1 = document.getElementById('cart-step-1');
            const step2 = document.getElementById('cart-step-2');
            const cartTitle = document.getElementById('cart-title');

            if (step === 1) {
                step1.style.display = 'flex';
                step2.style.display = 'none';
                cartTitle.textContent = 'üõí Meu Carrinho';
            } else if (step === 2) {
                step1.style.display = 'none';
                step2.style.display = 'flex';
                cartTitle.textContent = 'üìç Endere√ßo de Entrega';
                calculateDelivery(); 
            }
        }

        function renderProducts(productsToRender = products) {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            if (productsToRender.length === 0) {
                grid.innerHTML = '<p style="color: white; text-align: center; grid-column: 1 / -1;">Nenhum produto encontrado.</p>';
                return;
            }
            productsToRender.forEach((product) => {
                const productIndex = products.findIndex(p => p.produto === product.produto && p.volume === product.volume);
                const card = document.createElement('div');
                card.className = 'product-card';
                const categoryEmoji = getCategoryEmoji(product.tipo);
                card.innerHTML = `
                    <div class="product-category">${categoryEmoji} ${product.tipo}</div>
                    <div class="product-name">${product.produto}</div>
                    <div class="product-volume">${product.volume}</div>
                    <div class="product-price">R$ ${product.preco}</div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="changeQuantity(${productIndex}, -1)">‚àí</button>
                        <div class="quantity-display" id="qty-${productIndex}">${quantities[productIndex]}</div>
                        <button class="quantity-btn" onclick="changeQuantity(${productIndex}, 1)">+</button>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(${productIndex})">
                        üõí Adicionar ao Carrinho
                    </button>
                `;
                grid.appendChild(card);
            });
        }

        function getCategoryEmoji(category) {
            const emojis = {
                'Cerveja': 'üç∫', 'Whisky': 'ü•É', 'Vodka': 'üç∏', 'Gin': 'üç∏', 'Cacha√ßa': 'üçπ', 'Vinho': 'üç∑',
                'Refrigerante': 'ü•§', 'Snack': 'üçø', 'Tabaco': 'üö¨', 'Cigarro': 'üö¨', 'Doce': 'üç´',
                'Energ√©tico': '‚ö°', 'Rum': 'üçπ', 'Licor': 'üç∑', 'Combo': 'üéÅ', 'Acess√≥rio': 'üîß',
                'Bebida': 'üßä', 'Gelo': 'üßä', 'Espumante': 'ü•Ç', 'Tequila': 'üçπ', 'Carvao': '‚ö´'
            };
            return emojis[category] || 'üì¶';
        }

        function changeQuantity(index, change) {
            quantities[index] = Math.max(1, (quantities[index] || 1) + change);
            document.getElementById(`qty-${index}`).textContent = quantities[index];
        }

        function addToCart(index) {
            const product = products[index];
            const quantity = quantities[index];
            const existingItem = cart.find(item => item.product.produto === product.produto && item.product.volume === product.volume);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ product: product, quantity: quantity });
            }
            updateCartUI();
            const button = event.target;
            button.textContent = '‚úÖ Adicionado!';
            button.style.background = 'var(--accent-green)';
            setTimeout(() => {
                button.textContent = 'üõí Adicionar ao Carrinho';
                button.style.background = '';
            }, 1500);
        }

        function calculateDelivery() {
            const neighborhood = document.getElementById('bairro').value;
            const feeMessageEl = document.getElementById('delivery-fee-message');
            
            switch(neighborhood) {
                case 'sambaqui':
                case 'barra-do-sambaqui':
                    deliveryFee = 5;
                    feeMessageEl.textContent = '';
                    break;
                case 'santo-antonio':
                    deliveryFee = 10;
                    feeMessageEl.textContent = '';
                    break;
                case 'outro':
                    deliveryFee = 0; 
                    feeMessageEl.textContent = 'Taxa de R$ 5/km a ser combinada.';
                    break;
                default:
                    deliveryFee = 0;
                    feeMessageEl.textContent = 'Selecione um bairro para ver a taxa.';
            }
            updateCartUI();
        }

        function updateCartUI() {
            const cartItemsEl = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const cartTotalEl = document.getElementById('cartTotal');
            const checkoutBtn = document.getElementById('checkoutBtn');
            const goToDeliveryBtn = document.getElementById('goToDeliveryBtn');

            if (cart.length === 0) {
                cartItemsEl.innerHTML = '<div class="empty-cart"><h3>Carrinho Vazio</h3><p>Adicione alguns produtos incr√≠veis!</p></div>';
                cartCount.style.display = 'none';
                cartTotalEl.style.display = 'none';
                navigateToCartStep(1); // Reset to step 1
            } else {
                let subtotal = 0;
                let itemCount = 0;
                
                let cartItemsHTML = cart.map((item, cartIndex) => {
                    const itemTotal = parseFloat(item.product.preco.replace(',', '.')) * item.quantity;
                    subtotal += itemTotal;
                    itemCount += item.quantity;
                    return `
                        <div class="cart-item">
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.product.produto}</div>
                                <div class="cart-item-details">${item.product.volume} ‚Ä¢ Qtd: ${item.quantity}</div>
                                <div class="cart-item-price">R$ ${itemTotal.toFixed(2).replace('.', ',')}</div>
                            </div>
                            <div class="cart-item-controls">
                                <button class="remove-item" onclick="removeFromCart(${cartIndex})">üóëÔ∏è Remover</button>
                            </div>
                        </div>
                    `;
                }).join('');
                
                cartItemsEl.innerHTML = cartItemsHTML;
                cartCount.textContent = itemCount;
                cartCount.style.display = 'flex';
                cartTotalEl.style.display = 'block';

                const total = subtotal + deliveryFee;

                document.getElementById('subtotalAmountStep1').textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
                document.getElementById('subtotalAmountStep2').textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
                
                if (document.getElementById('bairro').value === 'outro') {
                    document.getElementById('deliveryFeeAmount').textContent = 'A combinar';
                } else {
                    document.getElementById('deliveryFeeAmount').textContent = `R$ ${deliveryFee.toFixed(2).replace('.', ',')}`;
                }

                document.getElementById('totalAmount').textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
                
                checkoutBtn.disabled = !document.getElementById('bairro').value;
                goToDeliveryBtn.disabled = false;
            }
        }

        function removeFromCart(cartIndex) {
            cart.splice(cartIndex, 1);
            if (cart.length === 0) {
                deliveryFee = 0; // Reset fee if cart is empty
                document.getElementById('bairro').value = ''; // Reset neighborhood selection
            }
            calculateDelivery();
            updateCartUI();
        }

        function toggleCart() {
            document.getElementById('cartSidebar').classList.toggle('open');
            navigateToCartStep(1); // Always open on the first step
        }

        function checkout() {
            const bairroEl = document.getElementById('bairro');
            const rua = document.getElementById('rua').value;
            const numero = document.getElementById('numero').value;
            const cep = document.getElementById('cep').value;
            const bairroText = bairroEl.options[bairroEl.selectedIndex].text;

            if (!bairroEl.value || !rua || !numero) {
                alert('Por favor, preencha o bairro, a rua e o n√∫mero para a entrega.');
                return;
            }

            let message = 'üõí *NOVO PEDIDO - POLO NORTE*\n\n';
            let subtotal = 0;
            
            message += 'üõçÔ∏è *PRODUTOS:*\n';
            cart.forEach(item => {
                const itemTotal = parseFloat(item.product.preco.replace(',', '.')) * item.quantity;
                subtotal += itemTotal;
                message += `- ${item.quantity}x ${item.product.produto} (${item.product.volume}) - R$ ${itemTotal.toFixed(2).replace('.', ',')}\n`;
            });

            message += '\n----------------------------------\n';
            
            message += 'üìç *ENDERE√áO DE ENTREGA:*\n';
            message += `Rua: ${rua}, N¬∫: ${numero}\n`;
            message += `Bairro: ${bairroText}\n`;
            if (cep) message += `CEP: ${cep}\n`;

            message += '\n----------------------------------\n';

            message += 'üí∞ *RESUMO FINANCEIRO:*\n';
            message += `Subtotal dos Produtos: R$ ${subtotal.toFixed(2).replace('.', ',')}\n`;
            
            let deliveryFeeText = '';
            if (bairroEl.value === 'outro') {
                deliveryFeeText = 'A combinar (R$ 5/km)';
            } else {
                deliveryFeeText = `R$ ${deliveryFee.toFixed(2).replace('.', ',')}`;
            }
            message += `Taxa de Entrega: ${deliveryFeeText}\n`;
            
            const total = subtotal + deliveryFee;
            message += `*TOTAL: R$ ${total.toFixed(2).replace('.', ',')}*\n`;

            if (bairroEl.value === 'outro') {
                message += `_(Total acima n√£o inclui a taxa de entrega, que ser√° combinada.)_`;
            }

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://api.whatsapp.com/send?phone=5548999299710&text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }
    </script>
</body>
</html>
